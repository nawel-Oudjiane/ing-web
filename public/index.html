<!--public/index.html-->
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plateforme R√©servation Salles</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS -->
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <link rel="stylesheet" href="style-map.css"> <!-- AJOUTEZ -->
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-building"></i>
            <span>ReserveURroom</span>
        </div>
        <div class="nav-links">
            <a href="#accueil"><i class="fas fa-home"></i> Accueil</a>
            <a href="#salles"><i class="fas fa-door-open"></i> Salles</a>
            <a href="#reserver"><i class="fas fa-calendar-check"></i> R√©server</a>
            <!-- Ajoutez ce bouton pour le th√®me -->
             <button id="theme-toggle" class="theme-btn" title="Changer le th√®me">
                    <i class="fas fa-moon"></i>
              </button>
            <a href="#admin" id="admin-link" class="hidden"><i class="fas fa-crown"></i> Admin</a>
            <a href="#compte" id="compte-link"><i class="fas fa-user"></i> Mon Compte</a>
        </div>
    </nav>

    <!-- CONTENU PRINCIPAL -->
    <div class="container">
        <!-- ACCUEIL -->
        <section id="accueil" class="hero">
            <h1>Plateforme de R√©servation de Salles</h1>
            <p class="subtitle">Syst√®me complet de gestion de r√©servations</p>
            <div id="auth-status" class="status-card">
                <h3><i class="fas fa-user-circle"></i> Non connect√©</h3>
                <p>Connectez-vous pour r√©server des salles</p>
            </div>
        </section>
       


        <!-- Auth) -->
        <section id="visitor-view" class="auth-section">
            <div class="auth-card">
                <h3><i class="fas fa-user-plus"></i> Inscription</h3>
                <select id="register-role">
                    <option value="client">Client</option>
                    <option value="owner">Propri√©taire</option>
                </select>
                <input type="text" id="register-name" placeholder="Nom complet">
                <input type="email" id="register-email" placeholder="Email">
                <input type="password" id="register-password" placeholder="Mot de passe">
                <button onclick="register()"><i class="fas fa-check"></i> S'inscrire</button>
            </div>
            <div class="auth-card">
                <h3><i class="fas fa-sign-in-alt"></i> Connexion</h3>
                <input type="email" id="login-email" placeholder="Email">
                <input type="password" id="login-password" placeholder="Mot de passe">
                <button onclick="login()"><i class="fas fa-key"></i> Se connecter</button>
            </div>
        </section>

        <!-- Liste des Salles -->   
        <section id="salles">
           <h2><i class="fas fa-door-open"></i> Toutes les Salles</h2>
           <div id="rooms-list" class="rooms-grid">
               Chargement des salles...
           </div>
        </section>

        <!-- MAPPPPCarte pour clients -->
       <section id="map-section">
    <h2><i class="fas fa-map-marked-alt"></i> Carte des salles disponibles</h2>
    <div id="client-map" style="height: 500px; border-radius: 12px; border: 2px solid #e0e0e0; margin-top: 1rem;"></div>
</section>

    </div>

    <!-- FOOTER -->
    <footer>
        <p>Plateforme de R√©servation de Salles</p>
    </footer>

    <script src="script.js"></script>
    <script src="map-utils.js"></script>
    <script src="client-map.js"></script>
    <script src="room-details.js"></script> 
    <!-- √Ä la fin de index.html, juste avant </body> -->



    <!--TEST rapideeeeeeee-->
<script>
// SCRIPT DE TEST RAPIDE
console.log("üß™ Test de la carte...");

function testMap() {
    const mapElement = document.getElementById('client-map');
    if (!mapElement) {
        console.error("‚ùå #client-map non trouv√©");
        return;
    }
    
    console.log("‚úÖ #client-map trouv√©");
    console.log("üìè Taille:", mapElement.offsetWidth, "x", mapElement.offsetHeight);
    
    // Forcer un reflow
    mapElement.style.display = 'none';
    mapElement.offsetHeight; // trigger reflow
    mapElement.style.display = 'block';
    
    // V√©rifier Leaflet
    if (typeof L === 'undefined') {
        console.error("‚ùå Leaflet non charg√© !");
        return;
    }
    
    console.log("‚úÖ Leaflet est charg√©");
    
    // Tester la cr√©ation d'une carte
    try {
        const testMap = L.map('client-map').setView([36.7525, 3.0420], 6);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(testMap);
        console.log("‚úÖ Carte de test cr√©√©e avec succ√®s !");
        
        // Supprimer la carte de test
        testMap.remove();
        
    } catch (error) {
        console.error("‚ùå Erreur cr√©ation carte test:", error);
    }
}

// Lancer le test
setTimeout(testMap, 1000);
</script>
    
</body>
</html>
